<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0/EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="common">
	
	
	
	<!-- 기태 -->
	<!-- 날짜에 다른 전혈 헌혈량 구하는 메소드 -->
	<select id="getBloodCount" parameterType="string" resultType="bloodCountVo">
	SELECT
	(select count(*) from BLOOD_STOCK where dt_type='전혈' and BS_BLOOD_TYPE ='A' and store_day = #{date}) AS "TYPE_A",
	(select count(*) from BLOOD_STOCK where dt_type='전혈' and BS_BLOOD_TYPE ='B' and store_day = #{date}) AS "TYPE_B",
	(select count(*) from BLOOD_STOCK where dt_type='전혈' and BS_BLOOD_TYPE ='AB' and store_day = #{date}) AS "TYPE_AB",
	(select count(*) from BLOOD_STOCK where dt_type='전혈' and BS_BLOOD_TYPE ='O' and store_day = #{date}) AS "TYPE_O"
	FROM dual
	</select>
	
	
	

	

</mapper>